/* CSS Variables for Cyberpunk Theme */
:root {
  --color-background: #0A1931; /* Deep Blue */
  --color-surface: rgba(20, 30, 50, 0.7); /* Transparent Dark */
  --color-accent1: #00FFFF; /* Electric Blue */
  --color-accent2: #39FF14; /* Neon Green */
  --color-text-primary: #E0E0E0; /* Very Light Gray */
  --color-text-highlight: #FFFFFF; /* White */
  --color-text-quote-source: rgba(180, 180, 180, 0.6); /* Transparent Gray */

  /* Fonts - Prioritize cyberpunk/monospace, fallback to system fonts */
  --font-primary: 'Courier New', Courier, monospace; /* Example, can be changed */
  --font-display: 'Orbitron', sans-serif; /* Example for headings or special text, if needed */
}

/* Basic Reset & Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden; /* Prevent scrollbars */
}

body {
  background-color: var(--color-background);
  color: var(--color-text-primary);
  font-family: var(--font-primary);
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative; /* For background animation pseudo-element */
}

/* Subtle Background Animation (Noise/Static) */
body::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  background-size: 200px 200px; /* Adjust for desired grain size */
  opacity: 0.03; /* Very subtle */
  animation: subtleNoise 0.5s steps(2) infinite;
  z-index: -1; /* Behind all content */
  pointer-events: none;
}

@keyframes subtleNoise {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-2px, 2px); }
  50% { transform: translate(2px, -2px); }
  75% { transform: translate(2px, 2px); }
  100% { transform: translate(0, 0); }
}


/* Main Application Container */
#app {
  width: 100%;
  max-width: 1200px; /* Max width for larger screens */
  height: 100vh;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center; /* Vertically center chat area */
  align-items: center; /* Horizontally center chat area */
  padding: 20px;
}

/* Chat Area - Central Text Display */
#chatArea {
  width: 80%; /* Adjust as needed */
  max-width: 800px; /* Max width for chat text */
  height: 30%; /* Adjust as needed - Reverted from 30% */
  display: flex;
  flex-direction: column;
  justify-content: center; /* Vertically center messages */
  align-items: center; /* Horizontally center messages content within chatArea */
  overflow: hidden; /* Hide messages that scroll out of view */
  position: relative; /* For positioning messages and quote source within */
  border: 1px solid var(--color-accent1); /* Reverted from none */
  background-color: var(--color-surface);
  padding: 20px;
  border-radius: 5px;
}

/* Message Styling (Basic Structure for now) */
.message {
  width: auto; /* Fit content */
  max-width: 95%; /* Max width within chatArea, ensure it's less than chatArea's padding allows */
  padding: 10px 15px;
  margin-bottom: 15px; /* Space between messages */
  opacity: 0; /* Start transparent for fade-in animation */
  transform: translateY(20px); /* Start slightly lower for fade-in animation */
  /* transition: opacity 0.5s ease-out, transform 0.5s ease-out; */ /* Removed to control via animation classes */
  font-size: 1.8em; /* Adjust as needed */
  line-height: 1.6;
  color: var(--color-text-primary);
  /* border-left: 3px solid var(--color-accent2); Optional accent */
}

.message p {
  margin: 0;
}

/* Specific speaker alignment (will be refined with animations) */
.message.speaker-ALVA {
  text-align: left; /* Or right, depending on final design */
  /* color: var(--color-accent1); */
}

.message.speaker-Bob {
  text-align: left; /* Or left, depending on final design */
  /* color: var(--color-accent2); */
}

/* Quote text and source styling (placeholders) */
.quote-text {
  /* Styles for the main quote text */
}

.quote-source {
  display: block; /* Ensure block display behavior */
  font-size: 1.2em;
  color: var(--color-text-quote-source);
  opacity: 0; /* Hidden initially, animated by JS */
  position: absolute;
  bottom: 10px; /* Position at the bottom of chatArea */
  right: 15px;  /* Position at the right of chatArea */
  text-align: right;
  width: auto; /* Allow it to size based on content */
  max-width: calc(100% - 30px); /* Max width considering padding of parent */
  font-family: var(--font-primary);
  z-index: 10; /* Ensure it's above other text flow within its context */
}


/* Controls (Basic Styling for now) */
#controls {
  position: absolute;
  top: 20px;
  left: 20px; /* Or right, or centered, per final design */
  z-index: 100;
}

#controls button {
  background-color: var(--color-surface);
  color: var(--color-accent1);
  border: 1px solid var(--color-accent1);
  padding: 10px 20px;
  margin-right: 10px;
  border-radius: 3px;
  cursor: pointer;
  font-family: var(--font-primary);
  font-size: 1em;
  transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
}

#controls button:hover {
  background-color: var(--color-accent1);
  color: var(--color-background);
  box-shadow: 0 0 10px var(--color-accent1);
}

#controls button:disabled {
  background-color: #222; /* Darker, less prominent */
  color: #666;
  border-color: #444;
  cursor: not-allowed;
}

/* System Messages */
#systemMessageContainer {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: auto;
  max-width: 90%;
  z-index: 50;
}

.message.speaker-System {
  background-color: rgba(0,0,0,0.7); /* Darker, more subtle */
  color: var(--color-text-quote-source);
  font-size: 0.9em;
  padding: 8px 15px;
  border-radius: 3px;
  text-align: center;
  opacity: 1; /* System messages are always visible if present */
  transform: none; /* No animation by default */
  margin-bottom: 0;
  /* Remove border from general .message if not desired for system messages */
  /* border-left: none; */
}

/*
  Placeholder for future animations:
  - Typewriter
  - Fade-in / Fade-out for quotes
  - Quote source animation
*/

/* New Animations */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.typewriter-cursor {
  display: inline-block;
  width: 0.1em;
  height: 1.2em; /* Should match line-height of text */
  background-color: var(--color-accent1);
  animation: blink 0.7s infinite;
  margin-left: 2px;
  vertical-align: middle;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-fade-in {
  animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-20px); /* Move up slightly as it fades */
  }
}

.message-fade-out {
  animation: fadeOut 0.5s ease-out forwards;
}

@keyframes fadeInQuickThenSlowFadeOut {
  0% { opacity: 0; transform: translateY(5px); }
  20% { opacity: 1; transform: translateY(0); }
  80% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-5px); }
}

.quote-source-animate {
  animation: fadeInQuickThenSlowFadeOut 5s ease-in-out forwards;
  /* animation-delay is handled by JS after typewriter */
}

/* Remove or comment out old animations */
/*
@keyframes fadeInMoveUpAndFadeOut {
  0% {
    opacity: 0;
    transform: translateY(100px) scale(0.8);
  }
  15% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  85% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-150px) scale(1.1);
  }
}

.message.animate-message {
  animation-name: fadeInMoveUpAndFadeOut;
  animation-duration: 5s;
  animation-timing-function: ease-in-out;
  animation-fill-mode: forwards;
}
*/

/* Background Conversation Log Styles */
#backgroundConversationLog {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -2; /* Behind #app and body::before noise */
  color: rgba(var(--color-text-primary-rgb, 224, 224, 224), 0.3); /* Very faint text - Reverted alpha from 0.4 */
  font-family: var(--font-primary);
  font-size: 1.2em; /* Smaller than main text - Reverted from 2.0em */
  line-height: 1.3;
  overflow-y: auto; /* Allow vertical scrolling */
  /* Hide scrollbar for Webkit browsers (Chrome, Safari, Edge) */
  /* Note: This is a non-standard pseudo-element */
  /* Hide scrollbar for Firefox */
  scrollbar-width: none;
  /* Hide scrollbar for IE/Edge (older versions) */
  -ms-overflow-style: none;
  padding: 10px;
  white-space: pre-wrap; /* Preserve newlines and wrap long lines */
  word-break: break-all; /* Break long words if necessary to prevent overflow */
  pointer-events: none; /* Make it non-interactive */
  /* To use --color-text-primary with opacity, we need its RGB values.
     Let's assume E0E0E0 -> 224,224,224.
     If CSS variables level 4 color-mix is available, that's better.
     For now, hardcoding or using a separate RGB variable is an option.
     Let's define --color-text-primary-rgb in :root if not already.
     For simplicity here, I'll use a direct rgba value.
  */
}
#backgroundConversationLog::-webkit-scrollbar {
  display: none; /* Hide scrollbar for Webkit browsers */
}

#backgroundConversationLog .bg-log-alva {
  font-weight: bold;
  /* Optionally, a slightly different faint color for ALVA if desired */
  /* color: rgba(var(--color-accent1-rgb, 0, 255, 255), 0.08); */
}

/* Add --color-text-primary-rgb to :root for better maintainability */
/* This should be added inside the :root selector block */
/* For now, the rgba in #backgroundConversationLog will work. */
